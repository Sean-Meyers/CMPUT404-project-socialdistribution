"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18],{80018:function(t,e,o){o.d(e,{Z:function(){return h}});var a=o(74106),s=class{getNodeType(){return this.nodeType}async getAuthors(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{let a=await this.axiosInstance.get("/authors/?page=".concat(t,"&size=").concat(e,"&query=").concat(o));if(void 0===a.data.items)throw Error("items is undefined");return a.data}catch(t){return console.error(t),{type:"authors",items:[]}}}async isPostLiked(t,e){try{let o=await this.axiosInstance.get("/authors/".concat(e,"/liked")),a=o.data.items;for(let e of a)if(e.object.includes(t))return!0;return!1}catch(t){return console.error(t),!1}}async isCommentLiked(t,e){try{let o=await this.axiosInstance.get("/authors/".concat(e,"/liked")),a=o.data.items;for(let e of a)if(e.object.includes(t))return!0;return!1}catch(t){return console.error(t),!1}}async getAuthor(t){try{let e=await this.axiosInstance.get("/authors/".concat(t));return e.data}catch(t){return console.error(t),null}}async createAuthor(t){if("remote"===this.nodeType)throw Error("Remote nodes do not support this operation");try{await this.axiosInstance.post("/authors/",t)}catch(t){console.log(t)}}async updateAuthor(t,e){if("remote"===this.nodeType)throw Error("Remote nodes do not support this operation");try{let o=await this.axiosInstance.put("/authors/".concat(t),e);return o.data}catch(t){return console.error(t),null}}async getFollowers(t){try{let e=await this.axiosInstance.get("/authors/".concat(t,"/followers"));if(void 0===e.data.items)throw Error("items is undefined");return e.data}catch(t){return console.error(t),{type:"authors",items:[]}}}async addFollower(t,e){if("remote"===this.nodeType)throw Error("Remote nodes do not support this operation");try{await this.axiosInstance.put("/authors/".concat(t,"/followers/").concat(e),{status:"friends"});let o=await this.getAuthor(e),a=await this.getAuthor(t);o&&a&&await this.sendToInbox(e,{type:"follow",summary:"".concat(a.displayName," accepted your follow request"),actor:o,object:a})}catch(t){console.log(t)}}async checkFollowerStatus(t,e){try{let o=await this.axiosInstance.get("/authors/".concat(t,"/followers/").concat(e));return o.data}catch(t){return console.error(t),"not_friends"}}async removeFollower(t,e){if("remote"===this.nodeType)throw Error("Remote nodes do not support this operation");try{return console.log(t,e),await this.axiosInstance.delete("/authors/".concat(t,"/followers/").concat(e))}catch(t){console.log(t)}}async sendFollowRequest(t,e){try{await this.sendToInbox(t.id.split("/").pop()||"",{type:"follow",summary:"".concat(e.displayName," wants to follow you"),actor:e,object:t})}catch(t){console.log(t)}}async getPost(t,e){try{let o=await this.axiosInstance.get("/authors/".concat(t,"/posts/").concat(e));return o.data}catch(t){return console.error(t),null}}async deletePost(t,e){if("remote"===this.nodeType)throw Error("Remote nodes do not support this operation");try{return await this.axiosInstance.delete("/authors/".concat(t,"/posts/").concat(e))}catch(t){console.log(t)}}async getPosts(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;try{let a=await this.axiosInstance.get("/authors/".concat(t,"/posts/?page=").concat(e,"&size=").concat(o));if(void 0===a.data.items)throw Error("items is undefined");return a.data}catch(t){return console.error(t),{type:"posts",items:[]}}}async alertNewPost(t,e){Promise.all((await this.getFollowers(t)).items.map(async o=>{let a=o.id.split("/").pop();"UNLISTED"!==e.visibility&&("PRIVATE"===e.visibility?"true_friends"==await this.checkFollowerStatus(a||"",t)&&await this.sendToInbox(a||"",e):await this.sendToInbox(a||"",e))})),await this.sendToInbox(t,e)}async updatePost(t,e,o){if("remote"===this.nodeType)throw Error("Remote nodes do not support this operation");let a=await this.axiosInstance.put("/authors/".concat(t,"/posts/").concat(e),o);return a.data}async createPost(t,e){if("remote"===this.nodeType)throw Error("Remote nodes do not support this operation");try{return(await this.axiosInstance.post("/authors/".concat(t,"/posts/"),e)).data}catch(t){return console.error(t),null}}async getComments(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;try{let s=await this.axiosInstance.get("/authors/".concat(t,"/posts/").concat(e,"/comments?page=").concat(o,"&size=").concat(a));if(void 0===s.data.comments)throw Error("items is undefined");return s.data}catch(t){return console.error(t),{type:"comments",page:0,size:0,comments:[],post:"",id:""}}}async createComment(t,e,o){if("remote"===this.nodeType)throw Error("Remote nodes do not support this operation");try{let a=await this.axiosInstance.post("/authors/".concat(t,"/posts/").concat(e,"/comments"),o);return await this.sendToInbox(t||"",o),a.data}catch(t){return console.error(t),null}}async createLike(t,e,o){try{await this.sendToInbox(t,{"@context":"https://www.w3.org/ns/activitystreams",summary:"".concat(o.displayName," liked your post: ").concat(e.title),type:"like",author:o,object:e.id})}catch(t){console.log(t)}}async createCommentLike(t,e,o){try{await this.sendToInbox(t,{"@context":"https://www.w3.org/ns/activitystreams",summary:"".concat(o.displayName," liked your comment"),type:"like",author:o,object:(null==e?void 0:e.id)||""})}catch(t){console.log(t)}}async getLiked(t){try{let e=await this.axiosInstance.get("/authors/".concat(t,"/liked"));return e.data}catch(t){return{type:"likes",items:[]}}}async sendToInbox(t,e){let o=await this.axiosInstance.post("/authors/".concat(t,"/inbox/"),e);return o.data}async getInbox(t){if("remote"===this.nodeType)throw Error("Remote nodes do not support this operation");try{let e=await this.axiosInstance.get("/authors/".concat(t,"/inbox/"));return e.data}catch(t){return{type:"inbox",author:"",items:[]}}}constructor(t,e,o="local"){this.axiosInstance=a.Z.create({baseURL:t,...e}),this.nodeType=o}},r=class{addNode(t){this.nodes={...this.nodes,...t}}removeNode(t){delete this.nodes[t]}getNodes(){return this.nodes}async checkAuthorExists(t){for(let e of Object.values(this.nodes))if("local"===e.getNodeType()&&await e.getAuthor(t))return!0;return!1}async getAuthor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";if("all"!==e)return await this.nodes[e].getAuthor(t);for(let e of Object.values(this.nodes)){let o=await e.getAuthor(t);if(o)return o}return null}async createAuthor(t){for(let e of Object.values(this.nodes))if("local"===e.getNodeType())return await e.createAuthor(t);throw Error("No local node found")}async getAuthors(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if("all"!==o)return await this.nodes[o].getAuthors(t,e,a);{let o=[];for(let s of Object.values(this.nodes)){let r=await s.getAuthors(t,e,a);o=o.concat(r.items)}return{type:"authors",items:o}}}async updateAuthor(t,e){for(let o of Object.values(this.nodes))if("local"===o.getNodeType())return await o.updateAuthor(t,e);throw Error("No local node found")}async getFollowers(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";if("all"!==e)return await this.nodes[e].getFollowers(t);{let e=[];for(let o of Object.values(this.nodes)){let a=await o.getFollowers(t);e=e.concat(a.items)}return{type:"authors",items:e}}}async isPostLiked(t,e){for(let o of Object.values(this.nodes)){let a=await o.isPostLiked(t,e);if(a)return!0}return!1}async isCommentLiked(t,e){for(let o of Object.values(this.nodes)){let a=await o.isCommentLiked(t,e);if(a)return!0}return!1}async alertNewPost(t,e){for(let o of Object.values(this.nodes))return await o.alertNewPost(t,e)}async addFollower(t,e){for(let o of Object.values(this.nodes))if("local"===o.getNodeType())return await o.addFollower(t,e);throw Error("No local node found")}async checkFollowerStatus(t,e){for(let o of Object.values(this.nodes)){let a=await o.checkFollowerStatus(t,e);return a}return""}async removeFollower(t,e){for(let o of Object.values(this.nodes))if("local"===o.getNodeType())return await o.removeFollower(t,e);throw Error("No local node found")}async sendFollowRequest(t,e){for(let o of Object.values(this.nodes))try{return await o.sendFollowRequest(t,e)}catch(t){console.log(t)}throw Error("No local node found")}async getPost(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all";if("all"!==o)return await this.nodes[o].getPost(t,e);for(let o of Object.values(this.nodes)){let a=await o.getPost(t,e);if(a)return a}return null}async getPosts(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"all";if("all"!==a)return await this.nodes[a].getPosts(t,e,o);{let a=[];for(let s of Object.values(this.nodes)){let r=await s.getPosts(t,e,o);a=a.concat(r.items)}return{type:"posts",items:a}}}async createPost(t,e){for(let o of Object.values(this.nodes))if("local"===o.getNodeType())return await o.createPost(t,e);throw Error("No local node found")}async updatePost(t,e,o){for(let a of Object.values(this.nodes))if("local"===a.getNodeType())return await a.updatePost(t,e,o);throw Error("No local node found")}async deletePost(t,e){for(let o of Object.values(this.nodes))if("local"===o.getNodeType())return await o.deletePost(t,e);throw Error("No local node found")}async getComments(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"all";if("all"!==s)return await this.nodes[s].getComments(t,e,o,a);{let s=[],r="",n="";for(let i of Object.values(this.nodes)){let c=await i.getComments(t,e,o,a);r=c.post,n=c.id,s=s.concat(c.comments)}return{type:"comments",comments:s,page:o,post:r,size:a,id:n}}}async createComment(t,e,o){for(let a of Object.values(this.nodes))if("local"===a.getNodeType())return await a.createComment(t,e,o);throw Error("No local node found")}async createLike(t,e,o){for(let a of Object.values(this.nodes))if("local"===a.getNodeType())return await a.createLike(t,e,o);throw Error("No local node found")}async createCommentLike(t,e,o){for(let a of Object.values(this.nodes))if("local"===a.getNodeType())return await a.createCommentLike(t,e,o);throw Error("No local node found")}async getLiked(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";if("all"!==e)return await this.nodes[e].getLiked(t);{let e=[];for(let o of Object.values(this.nodes)){let a=await o.getLiked(t);e=e.concat(a.items)}return{type:"likes",items:e}}}async getInbox(t){for(let e of Object.values(this.nodes))if("local"===e.getNodeType())return await e.getInbox(t);throw Error("No local node found")}constructor(t){this.nodes=t}};let n=new s("https://sd16-api.herokuapp.com/service",{auth:{username:"admin",password:"123"},headers:{"Content-Type":"application/json",Accept:"application/json"}},"local"),i=new s("https://sd7-api.herokuapp.com/api",{auth:{username:"node01",password:"P*ssw0rd!"},headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Credentials":!0}},"remote"),c=new s("https://social-distribution-w23-t17.herokuapp.com",{auth:{username:"remote-user-t16",password:"Th!sIsF1ne"},headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Credentials":!0}},"remote"),l=new s("https://cmput404-project-data.herokuapp.com/server",{headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Credentials":!0}},"remote"),d=new r({local:n,team12:l,team7:i,team17:c});var h=d}}]);