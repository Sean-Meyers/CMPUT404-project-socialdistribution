(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[384],{85817:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/authors/[author_id]/posts/create",function(){return i(83213)}])},83213:function(e,t,i){"use strict";i.r(t),i.d(t,{__N_SSP:function(){return f}});var s=i(28598),a=i(82684),n=i(51774),r=i.n(n),l=i(33354),o=i(7099),c=i(64645),d=i(1887),m=i.n(d),u=i(76697),x=i(81360),h=i(42413),g=i(38884),p=i(75367),v=i(16598),b=i(80018),j=i(34376),w=i(48497);let _=r()(()=>i.e(518).then(i.bind(i,86518)),{loadableGenerated:{webpack:()=>[86518]},ssr:!1}),N=e=>{let{authorId:t}=e,[i,n]=(0,a.useState)("text/plain"),[r,d]=(0,a.useState)(""),N=(0,p.cI)();(0,g.useSupabaseClient)(),(0,g.useUser)();let f=(0,j.useRouter)(),P=async e=>{"text/markdown"===e.contentType?e.content=r:"image/*"===e.contentType&&(e.content=await (0,v.y)(e.contentFile[0])),e.contentFile&&delete e.contentFile,e.categories=e.categories.split(",");try{let i=await b.Z.createPost(t,{...e,source:w.env.NEXT_PUBLIC_BASE_URL||"http://localhost:3000",origin:w.env.NEXT_PUBLIC_BASE_URL||"http://localhost:3000",unlisted:"UNLISTED"===e.visibility,visibility:e.visibility});i&&await b.Z.alertNewPost(t,i),await f.push("/authors/".concat(t))}catch(e){console.log(e)}};return(0,s.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,s.jsx)(m(),{children:(0,s.jsx)("title",{children:"Create Post"})}),(0,s.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,s.jsx)(x.Z,{}),(0,s.jsx)("div",{className:"overflow-y-auto w-full py-12",children:(0,s.jsx)(p.RV,{...N,children:(0,s.jsxs)("form",{className:"max-w-5xl mx-auto px-8",onSubmit:N.handleSubmit(P),children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-5",children:"Create Post"}),(0,s.jsx)(o.Z,{register:N.register,extraClass:"mb-6",id:"title",name:"Title",placeholder:"Enter a title",required:!0}),(0,s.jsx)(l.Z,{register:N.register,id:"description",name:"Description",placeholder:"Enter a description"}),(0,s.jsx)(h.Z,{register:N.register,id:"contentType",name:"Post Type",value:i,setValue:n,options:[{name:"Markdown",value:"text/markdown"},{name:"Plain Text",value:"text/plain"},{name:"Image",value:"image/*"},{name:"Image Link",value:"image/link"}]}),(0,s.jsxs)("div",{className:"mb-2",children:["image/*"===i&&(0,s.jsx)(u.Z,{register:N.register,id:"contentFile"}),"image/link"===i&&(0,s.jsx)(o.Z,{register:N.register,extraClass:"mb-6",id:"content",name:"Image Link",placeholder:"Enter an image link"}),"text/markdown"===i&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(_,{style:{minWidth:480},value:r,onChange:d})}),"text/plain"===i&&(0,s.jsx)(l.Z,{register:N.register,id:"content",name:"Content",placeholder:"Enter content"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)(o.Z,{register:N.register,extraClass:"mb-4",id:"categories",name:"Categories",placeholder:"Enter categories, seperated via comma. ",required:!0}),(0,s.jsx)("span",{className:"block text-sm font-medium text-gray-900 dark:text-white",children:"Post Visibility"}),(0,s.jsx)(h.Z,{register:N.register,id:"visibility",name:"Post Visibility",options:[{name:"Public",value:"PUBLIC"},{name:"Private",value:"PRIVATE"},{name:"Unlisted",value:"UNLISTED"}]})]}),(0,s.jsx)(c.Z,{name:"Create Post",className:"text-white"})]})})})]})]})};var f=!0;t.default=N}},function(e){e.O(0,[434,436,531,632,18,367,774,888,179],function(){return e(e.s=85817)}),_N_E=e.O()}]);