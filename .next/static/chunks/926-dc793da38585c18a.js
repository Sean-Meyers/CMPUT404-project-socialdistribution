"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[926],{64645:function(e,t,s){var a=s(28598);s(82684);let r=e=>{let{name:t,className:s,onClick:r}=e;return(0,a.jsx)("button",{type:"submit",onClick:r,className:"bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 ".concat(s),children:t})};t.Z=r},37926:function(e,t,s){s.r(t),s.d(t,{default:function(){return Z}});var a=s(28598),r=s(82684),o=s(12691),l=s.n(o),n=s(41859),i=s(67973),c=s(42535),d=s(80020),p=s(96850),m=s(16593),x=s(60865),h=s(10268),u=s(80018),g=s(34376),b=s(38884),y=s(37333),f=s(65952),N=s(75367),j=s(33354),v=s(64645);let w=e=>{let{id:t,author:s,comment:o}=e,[n,i]=r.useState(!1),c=(0,b.useUser)();(0,r.useEffect)(()=>{if(!c)return;s.id.split("/").pop();let e=(null==t?void 0:t.split("/").pop())||"";u.Z.isCommentLiked(e,c.id).then(e=>{i(e)})},[c]);let p=async()=>{if(!c)return;let e=await u.Z.getAuthor(c.id);e&&(await u.Z.createCommentLike(s.id.split("/").pop()||"",{comment:o,id:t,contentType:"text/plain",author:s,type:"comment"},e),i(!0))};return(0,a.jsx)("div",{className:"bg-white border-gray-200 border-b p-3 shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("img",{className:"h-10 w-10 rounded-full",src:s.profileImage,alt:""})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)(l(),{className:"text-sm font-medium text-gray-800 hover:underline",href:"/authors/"+s.id.split("/").pop(),children:s.displayName}),(0,a.jsx)("div",{className:"flex-shrink-0 flex text-sm text-gray-600",children:o})]})]}),!n&&(0,a.jsx)(d.Z,{onClick:p,className:"w-6 h-6 text-gray-400 hover:text-gray-500 cursor-pointer"}),n&&(0,a.jsx)(d.Z,{className:"text-blue-500 w-6 h-6 hover:text-blue-500 cursor-pointer"})]})})},k=e=>{let{post:t,comments:s}=e,[o,k]=r.useState(!1),Z=(0,b.useUser)(),C=(0,g.useRouter)(),[T,S]=r.useState(!1),F=(0,N.cI)(),E=()=>{S(!1),F.reset()};(0,r.useEffect)(()=>{let e=t.id.split("/").pop();Z&&u.Z.isPostLiked(e||"",(null==Z?void 0:Z.id)||"").then(e=>{e&&k(!0)})},[Z]);let I=async()=>{let e=t.author.id.split("/").pop()||"";if(o)return;let s=await u.Z.getAuthor((null==Z?void 0:Z.id)||"");s&&(await u.Z.createLike(e,t,s),k(!0))},L=async e=>{let s=t.author.id.split("/").pop()||"",a=t.id.split("/").pop()||"",r=await u.Z.getAuthor((null==Z?void 0:Z.id)||"");r&&(await u.Z.createComment(s,a,{type:"comment",comment:e.comment,contentType:"text/plain",published:new Date().toISOString(),author:r}),await C.push("/authors/".concat(t.author.id.split("/").pop(),"/posts/").concat(t.id.split("/").pop()))),E()};return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex flex-col border border-gray-100 shadow-sm rounded-sm mb-4",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center pt-4 px-5",children:[(0,a.jsx)(l(),{href:"/authors/".concat(t.author.id.split("/").slice(-1),"/posts/").concat(t.id.split("/").slice(-1)),children:(0,a.jsx)("h2",{className:"text-base hover:underline text-gray-700 font-semibold",children:t.title})}),(0,a.jsx)("div",{children:t.author.id.includes((null==Z?void 0:Z.id)||"")&&(0,a.jsxs)(h.v,{as:"div",className:"relative",children:[(0,a.jsx)(h.v.Button,{children:(0,a.jsx)(i,{className:"w-7 h-7 text-gray-700 cursor-pointer"})}),(0,a.jsxs)(h.v.Items,{className:"absolute right-0 mt-0 w-56 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[(0,a.jsx)(h.v.Item,{children:e=>{let{active:s}=e;return(0,a.jsx)(l(),{className:"block px-4 py-2 text-sm text-gray-700 ".concat(s?"bg-gray-100":""),href:"/authors/".concat((null==Z?void 0:Z.id)||"","/posts/").concat(t.id.split("/").slice(-1),"/edit"),children:"Edit"})}}),(0,a.jsx)(h.v.Item,{children:e=>{let{active:s}=e;return(0,a.jsx)(l(),{onClick:async()=>{await u.Z.deletePost(t.author.id.split("/").pop()||"",t.id.split("/").pop()||""),await C.reload()},className:"block px-4 py-2 text-sm text-gray-700 ".concat(s?"bg-gray-100":""),href:"#",children:"Delete"})}})]})]})})]}),(0,a.jsx)("div",{className:"my-3 border-t border-b border-gray-100 ".concat(t.contentType.includes("image")?"":"p-5"),children:(0,a.jsxs)(a.Fragment,{children:["text/markdown"===t.contentType&&(0,a.jsx)(n.Z,{options:{overrides:{h1:{component:"h1",props:{className:"text-2xl font-semibold text-gray-700"}},h2:{component:"h2",props:{className:"text-xl font-semibold text-gray-700"}},h3:{component:"h3",props:{className:"text-lg font-semibold text-gray-700"}},h4:{component:"h4",props:{className:"text-base font-semibold text-gray-700"}},h5:{component:"h5",props:{className:"text-sm font-semibold text-gray-700"}},h6:{component:"h6",props:{className:"text-xs font-semibold text-gray-700"}},p:{component:"p",props:{className:"text-gray-700"}},a:{component:"a",props:{className:"text-blue-500"}},ul:{component:"ul",props:{className:"list-disc list-inside"}},ol:{component:"ol",props:{className:"list-decimal list-inside"}},li:{component:"li",props:{className:"text-gray-700"}},table:{component:"table",props:{className:"table-auto"}},th:{component:"th",props:{className:"border px-4 py-2"}},td:{component:"td",props:{className:"border px-4 py-2"}},tr:{component:"tr",props:{className:"bg-gray-100"}},thead:{component:"thead",props:{className:"bg-gray-200"}},tbody:{component:"tbody",props:{className:"bg-gray-100"}},blockquote:{component:"blockquote",props:{className:"border-l-4 border-gray-200 pl-4 italic"}},img:{component:"img",props:{className:"w-full"}},br:{component:"br",props:{className:"w-full"}},b:{component:"b",props:{className:"font-bold"}},i:{component:"i",props:{className:"italic"}},em:{component:"em",props:{className:"italic"}},strong:{component:"strong",props:{className:"font-bold"}},code:{component:"code",props:{className:"bg-gray-200 rounded-sm px-1"}},pre:{component:"pre",props:{className:"bg-gray-200 rounded-sm px-1"}},hr:{component:"hr",props:{className:"border-gray-200"}}}},children:t.content}),"text/plain"===t.contentType&&(0,a.jsx)("p",{children:t.content}),"image/*"===t.contentType&&(0,a.jsx)("img",{className:"object-cover w-full h-full",src:t.content,alt:t.title}),"image/link"===t.contentType&&(0,a.jsx)("img",{className:"object-cover w-full h-full",src:t.content,alt:t.title})]})}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between px-6",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 ",children:t.description}),(0,a.jsxs)("span",{className:"flex flex-row space-x-3 ",children:[(0,a.jsxs)("div",{className:"border-r border-gray-200 pr-3 flex space-x-2 items-center justify-center",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5 text-gray-400 hover:text-gray-500 cursor-pointer",onClick:()=>S(!0)}),!o&&(0,a.jsx)(d.Z,{className:"h-5 w-5 text-gray-400 hover:text-gray-500 cursor-pointer",onClick:I}),o&&(0,a.jsx)(d.Z,{className:"h-5 w-5 text-pink-600 hover:text-pink-600 cursor-pointer"})]}),(0,a.jsx)(x.Tooltip,{content:"Reshare Post",children:(0,a.jsx)(p.Z,{className:"h-5 w-5 text-gray-400 hover:text-gray-500 cursor-pointer"})}),(0,a.jsx)(x.Tooltip,{content:"Copy Link",children:(0,a.jsx)(m.Z,{className:"h-5 w-5 text-gray-400 hover:text-gray-500 cursor-pointer",onClick:()=>{navigator.clipboard.writeText("".concat(window.location.protocol,"//").concat(window.location.host,"/authors/").concat(t.author.id.split("/").pop(),"/posts/").concat(t.id.split("/").pop()))}})})]})]}),(0,a.jsx)("p",{className:"px-6",children:t.categories.map((e,s)=>{let r=s===t.categories.length-1?"":", ";return(0,a.jsxs)("span",{className:"text-gray-400 text-sm",children:[e,r," "]},s)})}),(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center mb-2 px-6",children:[(0,a.jsx)(l(),{href:t.source||"#",className:"text-blue-500 hover:underline text-sm",children:"source"}),(0,a.jsxs)(l(),{className:"text-gray-500 font-medium text-sm mt-1",href:t.author.url||"/authors/"+t.author.id,children:["Posted By ",t.author.displayName]})]}),(0,a.jsxs)("div",{className:"px-6 py-2 flex flex-row items-center justify-between text-gray-400 border-t border-gray-200 text-sm",children:[(0,a.jsxs)("span",{children:[s?s.length:t.count," comments"]}),!s&&(0,a.jsx)(l(),{href:"/authors/".concat(t.author.id.split("/").pop(),"/posts/").concat(t.id.split("/").pop()),children:"View all comments"})]}),(0,a.jsx)("div",{className:" border-t border-gray-200",children:s&&s.map((e,t)=>(0,r.createElement)(w,{...e,key:t}))}),(0,a.jsx)(y.u,{appear:!0,show:T,as:r.Fragment,children:(0,a.jsxs)(f.V,{as:"div",className:"relative z-10",onClose:E,children:[(0,a.jsx)(y.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,a.jsx)(y.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(f.V.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,a.jsxs)(f.V.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:[t.title," Comment"]}),(0,a.jsx)(N.RV,{...F,children:(0,a.jsxs)("form",{onSubmit:F.handleSubmit(L),children:[(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(j.Z,{register:F.register,id:"comment",name:"",placeholder:"Say Something..."})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(v.Z,{name:"Submit",className:"w-full text-white"})})]})})]})})})})]})})]})})};var Z=k},33354:function(e,t,s){var a=s(28598);s(82684);let r=e=>{let{id:t,name:s,placeholder:r,register:o}=e;return(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:t,className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:s}),(0,a.jsx)("textarea",{...o(t),id:t,rows:4,className:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:r})]})};t.Z=r}}]);